import{c as W,j as e,M as h,I as de,B as D,u as tt,r as d,a as nt,b as ot,X as rt,C as ue,d as X,e as F,f as pe,P as I,g as G,h as he,i as B,k as st,R as y,l as at,m as ct,n as T,o as it}from"./index-CPMHWxjz.js";import{L as fe,u as me,P as lt}from"./label-DZLY2qqU.js";import{c as dt,a as R,b as ut,d as _,u as xe,o as pt,C as Ce,T as ht,e as ft,f as le,g as O,h as mt,i as M,j as xt,L as be}from"./table-R1nQt4Qj.js";import{S as Ct,a as bt,b as gt,c as vt,d as jt,C as yt,u as Nt}from"./select-iFDQp3zG.js";import{D as ge,a as ve,b as je,U as At,c as ye,d as Ne,e as Ae}from"./dialog-DdGRat3_.js";import{u as V}from"./useMutation-TEPv2e21.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=W("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=W("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=W("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),kt=dt().shape({Nome:R().required("Nome é obrigatório"),Login:R().required("Login é obrigatório"),Senha:R().required("Senha é obrigatória").min(6,"Senha deve ter no mínimo 6 caracteres"),ConfirmarSenha:R().required("Confirmação de senha é obrigatória").oneOf([ut("Senha")],"As senhas devem ser iguais"),ID_Grupo:R().required("Grupo é obrigatório"),Email:R().required("Email é obrigatório").email("Email inválido")}),Q="grupo";function Rt(){return _.get(`${Q}/byLogin`)}function _t(t){return _.post(Q,t)}function wt(t){return _.delete(`${Q}/deleteGrupos`,{data:t})}async function Pt(){return(await Rt()).data.value}function Ee(){return xe({queryKey:["gruposByLogin"],queryFn:Pt})}const Dt=({value:t,onValueChange:s,disabled:n,label:r,error:a})=>{const{data:o}=Ee();return e.jsxs(e.Fragment,{children:[e.jsx(fe,{children:r}),e.jsxs(Ct,{onValueChange:s,value:t,disabled:n,defaultValue:"",children:[e.jsx(bt,{children:e.jsx(gt,{placeholder:h.SELECT})}),e.jsx(vt,{children:o==null?void 0:o.map(c=>e.jsx(jt,{value:c.ID,children:c.Nome},c.ID))})]}),a&&e.jsx("p",{className:"mt-0 text-sm text-red-500",children:a})]})},P=({label:t,placeholder:s="",type:n="text",error:r,register:a})=>e.jsxs(e.Fragment,{children:[e.jsx(fe,{children:t}),e.jsx(de,{type:n,placeholder:s||t,...a}),r&&e.jsx("p",{className:"mt-0 text-sm text-red-500",children:r})]}),Tt=({isPending:t,onSubmit:s})=>{var u,m,x,f,l,C;const{register:n,handleSubmit:r,setValue:a,getValues:o,formState:{errors:c}}=me({resolver:pt(kt)}),i=b=>{a("ID_Grupo",b)};return e.jsxs("form",{onSubmit:r(s),className:"space-y-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(P,{label:h.NAME,register:n("Nome"),error:(u=c.Nome)==null?void 0:u.message})}),e.jsx("div",{className:"space-y-1",children:e.jsx(P,{label:h.LOGIN,register:n("Login"),error:(m=c.Login)==null?void 0:m.message})}),e.jsx("div",{className:"space-y-1",children:e.jsx(P,{label:h.PASSWORD,register:n("Senha"),error:(x=c.Senha)==null?void 0:x.message})}),e.jsx("div",{className:"space-y-1",children:e.jsx(P,{label:h.CONFIRM_PASSWORD,register:n("ConfirmarSenha"),error:(f=c.ConfirmarSenha)==null?void 0:f.message})}),e.jsx("div",{className:"space-y-1",children:e.jsx(P,{label:h.EMAIL,register:n("Email"),error:(l=c.Email)==null?void 0:l.message})}),e.jsx("div",{className:"space-y-1",children:e.jsx(Dt,{label:h.GROUP,onValueChange:i,value:o().ID_Grupo,error:(C=c.ID_Grupo)==null?void 0:C.message})}),e.jsx(ge,{children:e.jsx(D,{type:"submit",disabled:t,children:t?h.SAVING:h.SAVE})})]})},Ot=({open:t,onOpenChange:s,onSubmit:n,isPending:r})=>{function a(o){n(o),s(!1)}return e.jsxs(ve,{open:t,onOpenChange:s,children:[e.jsx(je,{asChild:!0,children:e.jsxs(D,{variant:"outline",children:[e.jsx(At,{className:"mr-2"}),h.CREATE_EMPLOYEE]})}),e.jsxs(ye,{children:[e.jsx(Ne,{children:e.jsx(Ae,{children:h.NEW})}),e.jsx(Tt,{isPending:r,onSubmit:a})]})]})},Mt=({open:t,onOpenChange:s,onSubmit:n,isPending:r})=>{const{t:a}=tt(),{register:o,handleSubmit:c}=me();return e.jsxs(ve,{open:t,onOpenChange:s,children:[e.jsx(je,{asChild:!0,children:e.jsxs(D,{variant:"outline",children:[e.jsx(Et,{className:"mr-2"}),h.CREATE_GROUP]})}),e.jsxs(ye,{children:[e.jsx(Ne,{children:e.jsx(Ae,{children:h.NEW})}),e.jsxs("form",{onSubmit:c(n),className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx(de,{placeholder:h.GROUP_NAME,...o("Nome",{required:!0})})}),e.jsx(ge,{children:e.jsx(D,{type:"submit",disabled:r,children:r?h.SAVING:h.SAVE})})]})]})]})};async function Gt(t){return(await wt(t)).data.value}function Lt(){return V({mutationFn:Gt})}const Ft=({selected:t,onDeleteSuccess:s})=>{const[n,r]=d.useState(!1),{toast:a}=nt(),o=Lt(),c=()=>{if(t.length===0){a({title:h.ERROR,description:h.SELECT_AT_LEAST_ONE_GROUP,variant:"destructive"});return}r(!0)},i=()=>{o.mutateAsync({ListaGrupos:t}).then(()=>{r(!1),s()})};return e.jsxs(e.Fragment,{children:[e.jsxs(D,{variant:"destructive",onClick:c,disabled:t.length===0,children:[e.jsx(St,{size:16,className:"mr-2"}),h.DELETE_GROUPS]}),e.jsx(Ce,{isOpen:n,onOpenChange:r,title:h.CONFIRM_DELETION,description:h.DELETE_GROUPS_CONFIRMATION,onConfirm:i,onCancel:()=>r(!1)})]})},J="funcionario";function Bt(t){return _.get(`${J}/byGrupo`,{params:{ID_Grupo:t}})}function Vt(t){return _.post(J,t)}function $t(t){return _.put(`${J}/cancel`,{ID_Funcionario:t})}async function qt(t){return(await $t(t)).data.value}function Ht(){return V({mutationFn:qt})}const Ut=({funcionarios:t=[]})=>{const s=ot(),[n,r]=d.useState(null),[a,o]=d.useState(!1),c=Ht(),i=l=>{switch(l){case"A":return e.jsx(ue,{color:"#16d057"});case"C":return e.jsx(rt,{color:"#ee0606"});default:return l}};function u(l){s(`/funcionario/${l.ID}/pontos`)}const m=d.useCallback(l=>{const C=t.find(b=>b.ID===l.ID);C&&(r(C),o(!0),window.history.pushState({},"",`/cancelar-funcionario/${l.ID}`))},[t]),x=d.useCallback(()=>{c.mutateAsync(n.ID).then(l=>{l&&(o(!1),window.history.back())})},[n==null?void 0:n.ID,c]);function f(){o(!1),window.history.back()}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(ht,{children:[e.jsx(ft,{children:e.jsxs(le,{children:[e.jsx(O,{children:h.STATUS}),e.jsx(O,{children:h.NAME}),e.jsx(O,{children:h.EMAIL}),e.jsx(O,{children:h.ACTIONS})]})}),e.jsx(mt,{children:t.map(l=>e.jsxs(le,{className:"cursor-pointer hover:bg-muted",children:[e.jsx(M,{title:l.ST_Status=="A"?h.ACTIVE:h.CANCELED,children:i(l.ST_Status)}),e.jsx(M,{children:l.Nome}),e.jsx(M,{children:l.Email}),e.jsx(M,{children:e.jsx(xt,{row:l,cancelAction:l.ST_Status==="A"&&m,customActions:[{action:u,title:h.SEE_EMPLOYEE_POINTS,icon:e.jsx(It,{className:"w-5 h-5"})}]})})]},l.ID))})]})}),e.jsx(Ce,{isOpen:a,onOpenChange:o,description:h.CANCEL_EMPLOYEE_CONFIRMATION.withParameters({funcionario:(n==null?void 0:n.Nome)||""}),onConfirm:x,onCancel:f})]})};var $="Collapsible",[Kt,Ie]=X($),[zt,Z]=Kt($),Se=d.forwardRef((t,s)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:o,onOpenChange:c,...i}=t,[u,m]=F({prop:r,defaultProp:a??!1,onChange:c,caller:$});return e.jsx(zt,{scope:n,disabled:o,contentId:pe(),open:u,onOpenToggle:d.useCallback(()=>m(x=>!x),[m]),children:e.jsx(I.div,{"data-state":te(u),"data-disabled":o?"":void 0,...i,ref:s})})});Se.displayName=$;var ke="CollapsibleTrigger",Re=d.forwardRef((t,s)=>{const{__scopeCollapsible:n,...r}=t,a=Z(ke,n);return e.jsx(I.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":te(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:s,onClick:G(t.onClick,a.onOpenToggle)})});Re.displayName=ke;var ee="CollapsibleContent",_e=d.forwardRef((t,s)=>{const{forceMount:n,...r}=t,a=Z(ee,t.__scopeCollapsible);return e.jsx(he,{present:n||a.open,children:({present:o})=>e.jsx(Yt,{...r,ref:s,present:o})})});_e.displayName=ee;var Yt=d.forwardRef((t,s)=>{const{__scopeCollapsible:n,present:r,children:a,...o}=t,c=Z(ee,n),[i,u]=d.useState(r),m=d.useRef(null),x=B(s,m),f=d.useRef(0),l=f.current,C=d.useRef(0),b=C.current,v=c.open||i,j=d.useRef(v),g=d.useRef(void 0);return d.useEffect(()=>{const p=requestAnimationFrame(()=>j.current=!1);return()=>cancelAnimationFrame(p)},[]),st(()=>{const p=m.current;if(p){g.current=g.current||{transitionDuration:p.style.transitionDuration,animationName:p.style.animationName},p.style.transitionDuration="0s",p.style.animationName="none";const A=p.getBoundingClientRect();f.current=A.height,C.current=A.width,j.current||(p.style.transitionDuration=g.current.transitionDuration,p.style.animationName=g.current.animationName),u(r)}},[c.open,r]),e.jsx(I.div,{"data-state":te(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!v,...o,ref:x,style:{"--radix-collapsible-content-height":l?`${l}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...t.style},children:v&&a})});function te(t){return t?"open":"closed"}var Wt=Se,Xt=Re,Qt=_e,N="Accordion",Jt=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ne,Zt,en]=at(N),[q,Rn]=X(N,[en,Ie]),oe=Ie(),we=y.forwardRef((t,s)=>{const{type:n,...r}=t,a=r,o=r;return e.jsx(ne.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?e.jsx(rn,{...o,ref:s}):e.jsx(on,{...a,ref:s})})});we.displayName=N;var[Pe,tn]=q(N),[De,nn]=q(N,{collapsible:!1}),on=y.forwardRef((t,s)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},collapsible:o=!1,...c}=t,[i,u]=F({prop:n,defaultProp:r??"",onChange:a,caller:N});return e.jsx(Pe,{scope:t.__scopeAccordion,value:y.useMemo(()=>i?[i]:[],[i]),onItemOpen:u,onItemClose:y.useCallback(()=>o&&u(""),[o,u]),children:e.jsx(De,{scope:t.__scopeAccordion,collapsible:o,children:e.jsx(Te,{...c,ref:s})})})}),rn=y.forwardRef((t,s)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},...o}=t,[c,i]=F({prop:n,defaultProp:r??[],onChange:a,caller:N}),u=y.useCallback(x=>i((f=[])=>[...f,x]),[i]),m=y.useCallback(x=>i((f=[])=>f.filter(l=>l!==x)),[i]);return e.jsx(Pe,{scope:t.__scopeAccordion,value:c,onItemOpen:u,onItemClose:m,children:e.jsx(De,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(Te,{...o,ref:s})})})}),[sn,H]=q(N),Te=y.forwardRef((t,s)=>{const{__scopeAccordion:n,disabled:r,dir:a,orientation:o="vertical",...c}=t,i=y.useRef(null),u=B(i,s),m=Zt(n),f=ct(a)==="ltr",l=G(t.onKeyDown,C=>{var ce;if(!Jt.includes(C.key))return;const b=C.target,v=m().filter(z=>{var ie;return!((ie=z.ref.current)!=null&&ie.disabled)}),j=v.findIndex(z=>z.ref.current===b),g=v.length;if(j===-1)return;C.preventDefault();let p=j;const A=0,S=g-1,k=()=>{p=j+1,p>S&&(p=A)},w=()=>{p=j-1,p<A&&(p=S)};switch(C.key){case"Home":p=A;break;case"End":p=S;break;case"ArrowRight":o==="horizontal"&&(f?k():w());break;case"ArrowDown":o==="vertical"&&k();break;case"ArrowLeft":o==="horizontal"&&(f?w():k());break;case"ArrowUp":o==="vertical"&&w();break}const K=p%g;(ce=v[K].ref.current)==null||ce.focus()});return e.jsx(sn,{scope:n,disabled:r,direction:a,orientation:o,children:e.jsx(ne.Slot,{scope:n,children:e.jsx(I.div,{...c,"data-orientation":o,ref:u,onKeyDown:r?void 0:l})})})}),L="AccordionItem",[an,re]=q(L),Oe=y.forwardRef((t,s)=>{const{__scopeAccordion:n,value:r,...a}=t,o=H(L,n),c=tn(L,n),i=oe(n),u=pe(),m=r&&c.value.includes(r)||!1,x=o.disabled||t.disabled;return e.jsx(an,{scope:n,open:m,disabled:x,triggerId:u,children:e.jsx(Wt,{"data-orientation":o.orientation,"data-state":Ve(m),...i,...a,ref:s,disabled:x,open:m,onOpenChange:f=>{f?c.onItemOpen(r):c.onItemClose(r)}})})});Oe.displayName=L;var Me="AccordionHeader",Ge=y.forwardRef((t,s)=>{const{__scopeAccordion:n,...r}=t,a=H(N,n),o=re(Me,n);return e.jsx(I.h3,{"data-orientation":a.orientation,"data-state":Ve(o.open),"data-disabled":o.disabled?"":void 0,...r,ref:s})});Ge.displayName=Me;var Y="AccordionTrigger",Le=y.forwardRef((t,s)=>{const{__scopeAccordion:n,...r}=t,a=H(N,n),o=re(Y,n),c=nn(Y,n),i=oe(n);return e.jsx(ne.ItemSlot,{scope:n,children:e.jsx(Xt,{"aria-disabled":o.open&&!c.collapsible||void 0,"data-orientation":a.orientation,id:o.triggerId,...i,...r,ref:s})})});Le.displayName=Y;var Fe="AccordionContent",Be=y.forwardRef((t,s)=>{const{__scopeAccordion:n,...r}=t,a=H(N,n),o=re(Fe,n),c=oe(n);return e.jsx(Qt,{role:"region","aria-labelledby":o.triggerId,"data-orientation":a.orientation,...c,...r,ref:s,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});Be.displayName=Fe;function Ve(t){return t?"open":"closed"}var cn=we,ln=Oe,dn=Ge,$e=Le,qe=Be;const un=cn,He=d.forwardRef(({className:t,...s},n)=>e.jsx(ln,{ref:n,className:T("border-b",t),...s}));He.displayName="AccordionItem";const Ue=d.forwardRef(({className:t,children:s,...n},r)=>e.jsx(dn,{className:"flex",children:e.jsxs($e,{ref:r,className:T("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[s,e.jsx(yt,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Ue.displayName=$e.displayName;const Ke=d.forwardRef(({className:t,children:s,...n},r)=>e.jsx(qe,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:e.jsx("div",{className:T("pb-4 pt-0",t),children:s})}));Ke.displayName=qe.displayName;var U="Checkbox",[pn,_n]=X(U),[hn,se]=pn(U);function fn(t){const{__scopeCheckbox:s,checked:n,children:r,defaultChecked:a,disabled:o,form:c,name:i,onCheckedChange:u,required:m,value:x="on",internal_do_not_use_render:f}=t,[l,C]=F({prop:n,defaultProp:a??!1,onChange:u,caller:U}),[b,v]=d.useState(null),[j,g]=d.useState(null),p=d.useRef(!1),A=b?!!c||!!b.closest("form"):!0,S={checked:l,disabled:o,setChecked:C,control:b,setControl:v,name:i,form:c,value:x,hasConsumerStoppedPropagationRef:p,required:m,defaultChecked:E(a)?!1:a,isFormControl:A,bubbleInput:j,setBubbleInput:g};return e.jsx(hn,{scope:s,...S,children:mn(f)?f(S):r})}var ze="CheckboxTrigger",Ye=d.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:n,...r},a)=>{const{control:o,value:c,disabled:i,checked:u,required:m,setControl:x,setChecked:f,hasConsumerStoppedPropagationRef:l,isFormControl:C,bubbleInput:b}=se(ze,t),v=B(a,x),j=d.useRef(u);return d.useEffect(()=>{const g=o==null?void 0:o.form;if(g){const p=()=>f(j.current);return g.addEventListener("reset",p),()=>g.removeEventListener("reset",p)}},[o,f]),e.jsx(I.button,{type:"button",role:"checkbox","aria-checked":E(u)?"mixed":u,"aria-required":m,"data-state":Ze(u),"data-disabled":i?"":void 0,disabled:i,value:c,...r,ref:v,onKeyDown:G(s,g=>{g.key==="Enter"&&g.preventDefault()}),onClick:G(n,g=>{f(p=>E(p)?!0:!p),b&&C&&(l.current=g.isPropagationStopped(),l.current||g.stopPropagation())})})});Ye.displayName=ze;var ae=d.forwardRef((t,s)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:o,required:c,disabled:i,value:u,onCheckedChange:m,form:x,...f}=t;return e.jsx(fn,{__scopeCheckbox:n,checked:a,defaultChecked:o,disabled:i,required:c,onCheckedChange:m,name:r,form:x,value:u,internal_do_not_use_render:({isFormControl:l})=>e.jsxs(e.Fragment,{children:[e.jsx(Ye,{...f,ref:s,__scopeCheckbox:n}),l&&e.jsx(Je,{__scopeCheckbox:n})]})})});ae.displayName=U;var We="CheckboxIndicator",Xe=d.forwardRef((t,s)=>{const{__scopeCheckbox:n,forceMount:r,...a}=t,o=se(We,n);return e.jsx(he,{present:r||E(o.checked)||o.checked===!0,children:e.jsx(I.span,{"data-state":Ze(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:s,style:{pointerEvents:"none",...t.style}})})});Xe.displayName=We;var Qe="CheckboxBubbleInput",Je=d.forwardRef(({__scopeCheckbox:t,...s},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:c,required:i,disabled:u,name:m,value:x,form:f,bubbleInput:l,setBubbleInput:C}=se(Qe,t),b=B(n,C),v=Nt(o),j=it(r);d.useEffect(()=>{const p=l;if(!p)return;const A=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(A,"checked").set,w=!a.current;if(v!==o&&k){const K=new Event("click",{bubbles:w});p.indeterminate=E(o),k.call(p,E(o)?!1:o),p.dispatchEvent(K)}},[l,v,o,a]);const g=d.useRef(E(o)?!1:o);return e.jsx(I.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??g.current,required:i,disabled:u,name:m,value:x,form:f,...s,tabIndex:-1,ref:b,style:{...s.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Je.displayName=Qe;function mn(t){return typeof t=="function"}function E(t){return t==="indeterminate"}function Ze(t){return E(t)?"indeterminate":t?"checked":"unchecked"}const et=d.forwardRef(({className:t,...s},n)=>e.jsx(ae,{ref:n,className:T("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(Xe,{className:T("flex items-center justify-center text-current"),children:e.jsx(ue,{className:"h-4 w-4"})})}));et.displayName=ae.displayName;async function xn(t){return(await Bt(t)).data.value}function Cn(t){return xe({queryKey:["funcionariosByGrupo",t],queryFn:()=>xn(t),enabled:!!t})}const bn=({grupo:t,selected:s,setSelected:n})=>{const r=Cn(t.ID),a=d.useMemo(()=>s.includes(t.ID),[t.ID,s]),o=d.useCallback(c=>{c.valueOf()?n(i=>[...i,t.ID]):n(i=>i.filter(u=>u!==t.ID))},[t.ID,n]);return d.useEffect(()=>{r.refetch()},[r,t]),e.jsxs(He,{value:t.ID,className:"rounded-md mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4",children:[e.jsx(et,{checked:a,onCheckedChange:o}),e.jsx(Ue,{children:t.Nome})]}),e.jsxs(Ke,{className:"px-4",children:[e.jsx(be,{isLoading:r.isLoading,error:r.error}),e.jsx(Ut,{funcionarios:r.data})]})]})};async function gn(t){return(await Vt(t)).data.value}function vn(){return V({mutationFn:gn})}async function jn(t){return(await _t(t)).data.value}function yn(){return V({mutationFn:jn})}const wn=()=>{const[t,s]=d.useState(!1),[n,r]=d.useState(!1),[a,o]=d.useState([]),c=Ee(),i=yn(),u=vn();function m(C){u.mutateAsync(C).then(b=>{b&&(c.refetch(),r(!1))})}function x(C){i.mutateAsync(C).then(b=>{b&&(c.refetch(),s(!1))})}function f(){c.refetch(),o([])}const l=d.useMemo(()=>()=>{var C;return(C=c.data)!=null&&C.length?e.jsx(un,{type:"multiple",className:"w-full",children:c.data.map(b=>e.jsx(bn,{grupo:b,selected:a,setSelected:o},b.ID))}):null},[c.data,a]);return e.jsxs(e.Fragment,{children:[e.jsx(lt,{title:h.EMPLOYEE_GROUPS,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ft,{selected:a,onDeleteSuccess:f}),e.jsx(Ot,{open:n,onOpenChange:r,onSubmit:m,isPending:u.isPending}),e.jsx(Mt,{open:t,onOpenChange:s,onSubmit:x,isPending:i.isPending})]})}),e.jsx(be,{isLoading:c.isLoading,error:c.error}),e.jsx(l,{})]})};export{wn as default};
